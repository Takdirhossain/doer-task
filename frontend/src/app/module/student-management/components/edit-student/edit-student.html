<div class="flex flex-space-between align-center pl-2 pr-2">
  <h2>Edit Student</h2>
  <div  (click)="close()" class="cursor-pointer">
    <mat-icon>cancel</mat-icon>
  </div>
</div>

<mat-dialog-content>
  <form [formGroup]="editStudentForm" (ngSubmit)="save()">
    <!-- Roll Number -->
    <div class="flex flex-space-between gap-3">
      <div class="flex-1">
        <label for="rollNumber">Roll Number</label>
        <input type="number" id="rollNumber" formControlName="rollNumber" min="1" />
        <div *ngIf="editStudentForm.get('rollNumber')?.touched">
          <div class="form-error" *ngIf="editStudentForm.get('rollNumber')?.hasError('required')">
            Roll Number is Required
          </div>
          <div class="form-error" *ngIf="editStudentForm.get('rollNumber')?.hasError('min')">
            Roll number must be greater than 0
          </div>
        </div>
      </div>
      <div class="flex-1">
        <label for="username">Username</label>
        <input type="text" id="username" formControlName="username" />
        <div *ngIf="editStudentForm.get('username')?.touched">
          <div class="form-error" *ngIf="editStudentForm.get('username')?.hasError('required')">
            Username is Required
          </div>
          <div class="form-error" *ngIf="editStudentForm.get('username')?.hasError('minlength')">
            Username must be at least 3 characters
          </div>
          <div class="form-error" *ngIf="editStudentForm.get('username')?.hasError('maxlength')">
            Username must not exceed 20 characters
          </div>
        </div>
      </div>
    </div>

    <!-- First & Last Name -->
    <div class="flex flex-space-between gap-3 mt-3">
      <div class="flex-1">
        <label for="firstName">First Name</label>
        <input type="text" id="firstName" formControlName="firstName" />
        <div *ngIf="editStudentForm.get('firstName')?.touched">
          <div class="form-error" *ngIf="editStudentForm.get('firstName')?.hasError('required')">
            First Name is Required
          </div>
          <div class="form-error" *ngIf="editStudentForm.get('firstName')?.hasError('minlength')">
            First Name must be at least 2 characters
          </div>
        </div>
      </div>
      <div class="flex-1">
        <label for="lastName">Last Name</label>
        <input type="text" id="lastName" formControlName="lastName" />
        <div *ngIf="editStudentForm.get('lastName')?.touched">
          <div class="form-error" *ngIf="editStudentForm.get('lastName')?.hasError('required')">
            Last Name is Required
          </div>
          <div class="form-error" *ngIf="editStudentForm.get('lastName')?.hasError('minlength')">
            Last Name must be at least 2 characters
          </div>
        </div>
      </div>
    </div>

    <!-- Mobile & Address -->
    <div class="flex flex-space-between gap-3 mt-3">
      <div class="flex-1">
        <label for="mobile">Mobile</label>
        <input type="text" id="mobile" formControlName="mobile" />
        <div *ngIf="editStudentForm.get('mobile')?.touched">
          <div class="form-error" *ngIf="editStudentForm.get('mobile')?.hasError('required')">
            Mobile Number is Required
          </div>
          <div class="form-error" *ngIf="editStudentForm.get('mobile')?.hasError('pattern')">
            Invalid mobile number
          </div>
          <div
            class="form-error"
            *ngIf="
              editStudentForm.get('mobile')?.hasError('minlength') ||
              editStudentForm.get('mobile')?.hasError('maxlength')
            "
          >
            Mobile must be exactly 11 digits
          </div>
        </div>
      </div>
      <div class="flex-1">
        <label for="address">Address</label>
        <input type="text" id="address" formControlName="address" />
        <div *ngIf="editStudentForm.get('address')?.touched">
          <div class="form-error" *ngIf="editStudentForm.get('address')?.hasError('required')">
            Address is Required
          </div>
          <div class="form-error" *ngIf="editStudentForm.get('address')?.hasError('minlength')">
            Address must be at least 5 characters
          </div>
        </div>
      </div>
    </div>

    <!-- Email -->
    <div class="flex flex-space-between gap-3 mt-3 align-center">
      <div class=" flex-1">
        <label for="email">Email</label>
        <input type="email" id="email" formControlName="email" />
        <div *ngIf="editStudentForm.get('email')?.touched">
          <div class="form-error" *ngIf="editStudentForm.get('email')?.hasError('required')">
            Email is Required
          </div>
          <div class="form-error" *ngIf="editStudentForm.get('email')?.hasError('pattern')">
            Invalid email format
          </div>
        </div>
      </div>
      <div class="flex-1 flex  flex-column">
        <label for="status">Status</label>
       <div>
         <mat-slide-toggle formControlName="status">  </mat-slide-toggle>
       </div>
      </div>
    </div>

    <div align="end" class="mt-4">
      <button type="submit" class="btn-primary mt-4 w-100 pt-2 pb-2 btn" [disabled]="loading">
       Update Student <app-button-loading *ngIf="loading"></app-button-loading>
      </button>
    </div>
  </form>
</mat-dialog-content>

<div class="flex flex-space-between align-center pl-2 pr-2">
  <h2 mat-dialog-title>Add New Student</h2>
  <div mat-button (click)="close()" class="cursor-pointer">
    <mat-icon>cancel</mat-icon>
  </div>
</div>
<mat-dialog-content>
  <form [formGroup]="addStudentForm" (ngSubmit)="save()">
    <div class="flex flex-space-between gap-3">
      <div class="flex-1">
        <label for="rollNumber">Roll Number</label>
        <input type="number" id="rollNumber" formControlName="rollNumber" min="1" />
        <div *ngIf="addStudentForm.get('rollNumber')?.touched">
          <div class="form-error" *ngIf="addStudentForm.get('rollNumber')?.hasError('required')">
            Roll Number is Required
          </div>
          <div class="form-error" *ngIf="addStudentForm.get('rollNumber')?.hasError('min')">
            Roll number must be greater than 0
          </div>
        </div>
      </div>
      <div class="flex-1">
        <label for="username">Username</label>
        <input type="text" id="username" formControlName="username" />
        <div *ngIf="addStudentForm.get('username')?.touched">
          <div class="form-error" *ngIf="addStudentForm.get('username')?.hasError('required')">
            Username is Required
          </div>
          <div class="form-error" *ngIf="addStudentForm.get('username')?.hasError('minlength')">
            Username must be at least 3 characters
          </div>
          <div class="form-error" *ngIf="addStudentForm.get('username')?.hasError('maxlength')">
            Username must not exceed 20 characters
          </div>
        </div>
      </div>
    </div>
    <div class="flex flex-space-between gap-3">
      <div class="flex-1 mt-3">
        <label for="firstName">First Name</label>
        <input type="text" id="firstName" formControlName="firstName" />
        <div *ngIf="addStudentForm.get('firstName')?.touched">
          <div class="form-error" *ngIf="addStudentForm.get('firstName')?.hasError('required')">
            First Name is Required
          </div>
          <div class="form-error" *ngIf="addStudentForm.get('firstName')?.hasError('minlength')">
            First Name must be at least 2 characters
          </div>
        </div>
      </div>
      <div class="flex-1 mt-3">
        <label for="lastName">Last Name</label>
        <input type="text" id="lastName" formControlName="lastName" />
        <div *ngIf="addStudentForm.get('lastName')?.touched">
          <div class="form-error" *ngIf="addStudentForm.get('lastName')?.hasError('required')">
            Last Name is Required
          </div>
          <div class="form-error" *ngIf="addStudentForm.get('lastName')?.hasError('minlength')">
            Last Name must be at least 2 characters
          </div>
        </div>
      </div>
    </div>

    <div class="flex flex-space-between gap-3">
      <div class="flex-1 mt-3">
        <label for="mobile">Mobile </label>
        <input type="text" id="mobile" formControlName="mobile" />
        <div *ngIf="addStudentForm.get('mobile')?.touched">
          <div class="form-error" *ngIf="addStudentForm.get('mobile')?.hasError('required')">
            Mobile Number is Required
          </div>
          <div class="form-error" *ngIf="addStudentForm.get('mobile')?.hasError('pattern')">
            Invalid mobile number
          </div>
          <div
            class="form-error"
            *ngIf="
              addStudentForm.get('mobile')?.hasError('minlength') ||
              addStudentForm.get('mobile')?.hasError('maxlength')
            "
          >
            Mobile must be exactly 11 digits
          </div>
        </div>
      </div>
      <div class="flex-1 mt-3">
        <label for="address">Address</label>
        <input type="text" id="address" formControlName="address" />
        <div *ngIf="addStudentForm.get('address')?.touched">
          <div class="form-error" *ngIf="addStudentForm.get('address')?.hasError('required')">
            Address is Required
          </div>
          <div class="form-error" *ngIf="addStudentForm.get('address')?.hasError('minlength')">
            Address must be at least 5 characters
          </div>
        </div>
      </div>
    </div>
    <div class="mt-3">
      <label for="email">Email</label>
      <input type="email" id="email" formControlName="email" />
      <div *ngIf="addStudentForm.get('email')?.touched">
        <div class="form-error" *ngIf="addStudentForm.get('email')?.hasError('required')">
          Email is Required
        </div>
        <div class="form-error" *ngIf="addStudentForm.get('email')?.hasError('pattern')">
          Invalid email format
        </div>
      </div>
    </div>

    <div class="mt-3">
      <label for="password">Password</label>
      <input type="text" id="password" formControlName="password" />
      <div *ngIf="addStudentForm.get('password')?.touched">
        <div class="form-error" *ngIf="addStudentForm.get('password')?.hasError('required')">
          Password is Required
        </div>
        <div class="form-error" *ngIf="addStudentForm.get('password')?.hasError('minlength')">
          Password must be at least 6 characters
        </div>
        <div class="form-error" *ngIf="addStudentForm.get('password')?.hasError('maxlength')">
          Password must not exceed 20 characters
        </div>
      </div>
    </div>

    <div align="end">
      <button type="submit" class="btn-primary mt-4 w-100 pt-2 pb-2 btn" [disabled]="loading">
        Sign Up <app-button-loading *ngIf="loading"></app-button-loading>
      </button>
    </div>
  </form>
</mat-dialog-content>

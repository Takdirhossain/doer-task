<main>
    <section>
        <div class="wrap">
            <form *ngIf="signupForm" autocomplete="off" [formGroup]="signupForm" (ngSubmit)="submit()">
                <h1 class="text-center">Sign Up</h1>

                <div class="input-box">
                    <label for="username">Username<span class="required">*</span></label><br>
                    <input type="text" id="username" placeholder="Username" class="w-100" formControlName="username" autocomplete="new-username">
                    
                    <div *ngIf="signupForm.get('username')?.touched">
                        <div class="form-error" *ngIf="signupForm.get('username')?.hasError('required')">Username is Required</div>
                        <div class="form-error" *ngIf="signupForm.get('username')?.hasError('pattern')">Invalid username</div>
                        <div class="form-error" *ngIf="signupForm.get('username')?.hasError('minlength')">Username must be at least 3 characters</div>
                        <div class="form-error" *ngIf="signupForm.get('username')?.hasError('maxlength')">Username must not exceed 20 characters</div>
                    </div>
                </div>

                <div class="input-box mt-2">
                    <label for="email">Email<span class="required">*</span></label><br>
                    <input type="email" id="email" placeholder="Email" class="w-100" formControlName="email" autocomplete="new-email">
                    
                    <div *ngIf="signupForm.get('email')?.touched">
                        <div class="form-error" *ngIf="signupForm.get('email')?.hasError('required')">Email is Required</div>
                        <div class="form-error" *ngIf="signupForm.get('email')?.hasError('pattern')">Invalid email format</div>
                    </div>
                </div>

                <div class="input-box mt-2">
                    <label for="phone">Mobile<span class="required">*</span></label><br>
                    <input type="text" id="phone" placeholder="Mobile" class="w-100" formControlName="mobile" autocomplete="new-mobile">
                    
                    <div *ngIf="signupForm.get('mobile')?.touched">
                        <div class="form-error" *ngIf="signupForm.get('mobile')?.hasError('required')">Mobile is Required</div>
                        <div class="form-error" *ngIf="signupForm.get('mobile')?.hasError('pattern')">Invalid mobile number</div>
                        <div class="form-error" *ngIf="signupForm.get('mobile')?.hasError('minlength') || signupForm.get('mobile')?.hasError('maxlength')">Mobile must be exactly 11 digits</div>
                    </div>
                </div>

                <div class="input-box mt-2">
                    <label for="password">Password<span class="required">*</span></label>
                    <input type="password" id="password" placeholder="Password" class="w-100" formControlName="password" autocomplete="new-password">
                    
                    <div *ngIf="signupForm.get('password')?.touched">
                        <div class="form-error" *ngIf="signupForm.get('password')?.hasError('required')">Password is Required</div>
                        <div class="form-error" *ngIf="signupForm.get('password')?.hasError('pattern')">Invalid password format</div>
                        <div class="form-error" *ngIf="signupForm.get('password')?.hasError('minlength')">Password must be at least 6 characters</div>
                        <div class="form-error" *ngIf="signupForm.get('password')?.hasError('maxlength')">Password must not exceed 20 characters</div>
                    </div>
                </div>
                <div class="input-box mt-2">
                    <label for="role">Role<span class="required">*</span></label>
                    <select id="role" class="w-100" formControlName="role">
                        <option *ngFor="let role of roles" [value]="role.id" selected="{{role.name == 'TEACHER'}}">{{ role.name }}</option>
                    </select>
                </div>
                <span class="form-error pt-4" *ngIf="error">{{error}}</span>

                <button type="submit" class="btn-primary mt-4 w-100 pt-2 pb-2 btn" [disabled]="loading">Sign Up <app-button-loading *ngIf="loading"></app-button-loading></button>

                <div class="register">
                    <p>Already have an account? <a [routerLink]="['/auth/login']">Login</a></p>
                </div>
            </form>
        </div>
    </section>
</main>
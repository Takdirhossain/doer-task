<div class="container profile-container">
  <!-- Header -->
  <div class="header flex flex-column space-x-4">
    <div class="avatar rounded-full w-16 h-16 bg-primary flex items-center justify-center text-white text-xl font-bold">
      {{ (profile?.data?.firstName?.charAt(0) || '') + (profile?.data?.lastName?.charAt(0) || '') }}
    </div>

    <div class="flex-1">
      <!-- Name -->
      <div class="name text-2xl font-semibold">
        <ng-container *ngIf="!editMode">{{ profile?.data?.firstName }} {{ profile?.data?.lastName }}</ng-container>
        <ng-container *ngIf="editMode" class="flex space-x-2">
        <div>
              <input type="text" [(ngModel)]="formData.firstName" placeholder="First Name" class="input"/>
              <span *ngIf="validationError.firstName" class="form-error">{{ validationError.firstName }}</span>
        </div>
        <div>
              <input type="text" [(ngModel)]="formData.lastName" placeholder="Last Name" class="input"/>
              <span *ngIf="validationError.lastName" class="form-error">{{ validationError.lastName }}</span>
        </div>
        </ng-container>
      </div>

      <div class="username text-primary mt-4">@{{ profile?.data?.user?.username }}</div>
      <div class="status flex items-center space-x-2 mt-1">
        <div class="status-dot w-3 h-3 rounded-full bg-green-500"></div>
        <span>{{ profile?.data?.user?.status }}</span>
      </div>
    </div>

    <div class="actions space-x-2 mt-5">
      <button *ngIf="!editMode" (click)="toggleEdit()" class="btn btn-secondary">Edit</button>
      <button *ngIf="editMode" (click)="saveProfile()" class="btn btn-primary">Save</button>
      <button *ngIf="editMode" (click)="toggleEdit()" class="btn btn-outline-secondary">Cancel</button>
    </div>
  </div>

  <div class="content mt-6 space-y-6">
    <div class="section p-4 bg-white rounded shadow">
      <div class="section-title text-lg font-semibold mb-2">üìö Academic</div>

      <div class="info-item flex justify-between mb-2">
        <span class="label font-medium">Class</span>
        <span class="value">{{ profile?.data?.class }}</span>
      </div>

      <div class="info-item flex justify-between mb-2">
        <span class="label font-medium">Roll Number</span>
        <span class="value">{{ profile?.data?.rollNumber }}</span>
      </div>

      <div class="info-item flex justify-between">
        <span class="label font-medium">Date of Birth</span>
        <span class="value">{{ profile?.data?.dateOfBirth | date:'mediumDate' }}</span>
      </div>
    </div>

    <div class="section p-4 bg-white rounded shadow">
      <div class="section-title text-lg font-semibold mb-2">‚úâÔ∏è Contact</div>

      <div class="info-item flex justify-between align-center gap-2 mb-2">
        <span class="label font-medium">Email</span>
        <ng-container *ngIf="!editMode">{{ profile?.data?.user?.email }}</ng-container>
        <div>
          <input *ngIf="editMode" type="email" [(ngModel)]="formData.email" class="input "/>
          <span *ngIf="validationError.email" class="form-error">{{ validationError.email }}</span>
        </div>
      </div>

      <div class="info-item flex justify-between align-center gap-2 mb-2">
        <span class="label font-medium">Mobile</span>
        <ng-container *ngIf="!editMode">{{ profile?.data?.user?.mobileNumber }}</ng-container>
       <div>
         <input *ngIf="editMode" type="text" [(ngModel)]="formData.mobileNumber" class="input "/> <br>
        <span *ngIf="validationError.mobileNumber" class="form-error">{{ validationError.mobileNumber }}</span>
       </div>
      </div>

      <div class="info-item flex justify-between align-center gap-2">
        <span class="label font-medium">Address</span>
        <ng-container *ngIf="!editMode">{{ profile?.data?.address }}</ng-container>
        <div>
          <textarea *ngIf="editMode" [(ngModel)]="formData.address" class="input "></textarea>
          <span *ngIf="validationError.address" class="form-error">{{ validationError.address }}</span>
        </div>
      </div>
    </div>
  </div>
</div>
